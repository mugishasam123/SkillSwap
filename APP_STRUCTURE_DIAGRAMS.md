# SkillSwap App Structure & BLoC Diagrams

## 📱 Complete App Structure Diagram

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    SkillSwap Flutter Application                                            │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                           lib/                                                              │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│  🚀 main.dart                    🔥 firebase_options.dart                                                   │
│  📱 app.dart (MultiBlocProvider)                                                                             │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                         core/                                                          │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                    │ │
│  │  │    theme/       │  │   services/     │  │   widgets/      │  │   utils/        │                    │ │
│  │  │                 │  │                 │  │                 │  │                 │                    │ │
│  │  │ • app_theme.dart│  │ • theme_service │  │ • theme_switch  │  │ • constants     │                    │ │
│  │  │ • theme_bloc.dart│ │                 │  │                 │  │ • helpers       │                    │ │
│  │  │ • theme_state.dart│ │                 │  │                 │  │                 │                    │ │
│  │  │ • theme_event.dart│ │                 │  │                 │  │                 │                    │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                    │ │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                       features/                                                        │ │
│  │                                                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐ │ │
│  │  │                                    auth/                                                           │ │
│  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │ │ │
│  │  │  │   data/         │  │   models/       │  │ presentation/   │  │   domain/       │                │ │ │
│  │  │  │                 │  │                 │  │                 │  │                 │                │ │ │
│  │  │  │ • auth_repo     │  │ • user_model    │  │ ┌─────────────┐ │  │ • auth_usecase  │                │ │ │
│  │  │  │ • auth_service  │  │ • auth_model    │  │ │   bloc/     │ │  │ • auth_entity   │                │ │ │
│  │  │  │                 │  │                 │  │ │             │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • auth_bloc │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • auth_event│ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • auth_state│ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ └─────────────┘ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ ┌─────────────┐ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │   pages/    │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │             │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • login_page│ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • signup_page│ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ └─────────────┘ │  │                 │                │ │ │
│  │  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                │ │ │
│  │  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘ │ │
│  │                                                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐ │ │
│  │  │                                    home/                                                           │ │
│  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │ │ │
│  │  │  │   data/         │  │   models/       │  │ presentation/   │  │   domain/       │                │ │ │
│  │  │  │                 │  │                 │  │                 │  │                 │                │ │ │
│  │  │  │ • swap_repo     │  │ • swap.dart     │  │ ┌─────────────┐ │  │ • swap_usecase  │                │ │ │
│  │  │  │ • firebase_helper│ │ • user_model    │  │ │   pages/    │ │  │ • swap_entity   │                │ │ │
│  │  │  │ • email_service │  │                 │  │ │             │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • home_page │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • all_swaps │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • suggested │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • settings  │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • about     │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ └─────────────┘ │  │                 │                │ │ │
│  │  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                │ │ │
│  │  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘ │ │
│  │                                                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐ │ │
│  │  │                                  messages/                                                         │ │
│  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │ │ │
│  │  │  │   data/         │  │   models/       │  │ presentation/   │  │   domain/       │                │ │ │
│  │  │  │                 │  │                 │  │                 │  │                 │                │ │ │
│  │  │  │ • message_repo  │  │ • chat.dart     │  │ ┌─────────────┐ │  │ • chat_usecase  │                │ │ │
│  │  │  │                 │  │ • message.dart  │  │ │   pages/    │ │  │ • message_entity│                │ │ │
│  │  │  │                 │  │                 │  │ │             │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • chat_page │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • msg_list  │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ └─────────────┘ │  │                 │                │ │ │
│  │  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                │ │ │
│  │  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘ │ │
│  │                                                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐ │ │
│  │  │                                   profile/                                                         │ │
│  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │ │ │
│  │  │  │   data/         │  │   models/       │  │ presentation/   │  │   domain/       │                │ │ │
│  │  │  │                 │  │                 │  │                 │  │                 │                │ │ │
│  │  │  │ • profile_repo  │  │ • user_profile  │  │ ┌─────────────┐ │  │ • profile_usecase│               │ │ │
│  │  │  │ • image_upload  │  │                 │  │ │   pages/    │ │  │ • profile_entity│               │ │ │
│  │  │  │ • local_image   │  │                 │  │ │             │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • profile   │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • edit_profile│ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • user_dialog│ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ └─────────────┘ │  │                 │                │ │ │
│  │  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                │ │ │
│  │  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘ │ │
│  │                                                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐ │ │
│  │  │                                    swap/                                                           │ │
│  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │ │ │
│  │  │  │   data/         │  │   models/       │  │ presentation/   │  │   domain/       │                │ │ │
│  │  │  │                 │  │                 │  │                 │  │                 │                │ │ │
│  │  │  │ • swap_repo     │  │ • swap.dart     │  │ ┌─────────────┐ │  │ • swap_usecase  │                │ │ │
│  │  │  │                 │  │                 │  │ │   pages/    │ │  │ • swap_entity   │                │ │ │
│  │  │  │                 │  │                 │  │ │             │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • swap_page │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • swap_library│ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ └─────────────┘ │  │                 │                │ │ │
│  │  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                │ │ │
│  │  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘ │ │
│  │                                                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐ │ │
│  │  │                                   forum/                                                           │ │
│  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │ │ │
│  │  │  │   data/         │  │   models/       │  │ presentation/   │  │   domain/       │                │ │ │
│  │  │  │                 │  │                 │  │                 │  │                 │                │ │ │
│  │  │  │ • forum_repo    │  │ • discussion    │  │ ┌─────────────┐ │  │ • forum_usecase │                │ │ │
│  │  │  │                 │  │ • reply         │  │ │   pages/    │ │  │ • forum_entity  │                │ │ │
│  │  │  │                 │  │                 │  │ │             │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • forum_page│ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • post_details│ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ └─────────────┘ │  │                 │                │ │ │
│  │  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                │ │ │
│  │  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘ │ │
│  │                                                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐ │ │
│  │  │                                onboarding/                                                         │ │
│  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │ │ │
│  │  │  │   data/         │  │   models/       │  │ presentation/   │  │   domain/       │                │ │ │
│  │  │  │                 │  │                 │  │                 │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ ┌─────────────┐ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │   pages/    │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │             │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • splash    │ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ │ • onboarding│ │  │                 │                │ │ │
│  │  │  │                 │  │                 │  │ └─────────────┘ │  │                 │                │ │ │
│  │  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                │ │ │
│  │  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                         assets/                                                        │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                    │ │
│  │  │    images/      │  │    fonts/       │  │    icons/       │  │    animations/  │                    │ │
│  │  │                 │  │                 │  │                 │  │                 │                    │ │
│  │  │ • logo.png      │  │ • Poppins-*.ttf │  │ • app_icon.png  │  │ • loading.json  │                    │ │
│  │  │ • onboarding_*.png│ │                 │  │ • tab_icons.png│  │ • success.json  │                    │ │
│  │  │ • google_meet.png│ │                 │  │                 │  │                 │                    │ │
│  │  │ • zoom.png       │  │                 │  │                 │  │                 │                    │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                    │ │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

## 🎭 BLoC Pattern Architecture Diagram

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    BLoC Pattern Architecture                                               │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                         UI Layer (Presentation)                                           │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                      BLoC Layer (Business Logic)                                          │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                        Auth BLoC                                                          │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────────────────────────────┐    ┌─────────────────────────────────────┐                        │
│  │           Auth Events               │    │           Auth States                │                        │
│  ├─────────────────────────────────────┤    ├─────────────────────────────────────┤                        │
│  │ • AuthLoginRequested                │    │ • AuthInitial                        │                        │
│  │ • AuthSignupRequested               │    │ • AuthLoading                        │                        │
│  │ • AuthGoogleSignInRequested         │    │ • AuthSuccess                        │                        │
│  │ • AuthSignOutRequested              │    │ • AuthFailure                        │                        │
│  └─────────────────────────────────────┘    └─────────────────────────────────────┘                        │
│                    │                                    ▲                                                    │
│                    ▼                                    │                                                    │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                    Auth BLoC                                                           │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                    │ │
│  │  │ _onLoginRequest │  │ _onSignupRequest│  │ _onGoogleSignIn │  │ _onSignOutRequest│                    │ │
│  │  │                 │  │                 │  │                 │  │                 │                    │ │
│  │  │ • Email/Pass    │  │ • Create User   │  │ • Google OAuth  │  │ • Sign Out      │                    │ │
│  │  │ • Validation    │  │ • Firestore Doc │  │ • User Profile  │  │ • Clear State   │                    │ │
│  │  │ • Error Handling│  │ • Error Handling│  │ • Error Handling│  │ • Navigation    │                    │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                    │ │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                    │                                    ▲                                                    │
│                    ▼                                    │                                                    │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                  Firebase Services                                                     │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                    │ │
│  │  │ Firebase Auth   │  │   Firestore     │  │ Google Sign-In  │  │ Error Handling  │                    │ │
│  │  │                 │  │                 │  │                 │  │                 │                    │ │
│  │  │ • signInWithEmail│ │ • users collection│ │ • GoogleSignIn  │  │ • AuthException │                    │ │
│  │  │ • createUser    │  │ • user profiles │  │ • signIn()      │  │ • Custom Errors │                    │ │
│  │  │ • signOut       │  │ • real-time     │  │ • user data     │  │ • User Messages │                    │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                    │ │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                        Theme BLoC                                                         │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────────────────────────────┐    ┌─────────────────────────────────────┐                        │
│  │          Theme Events               │    │         Theme States                 │                        │
│  ├─────────────────────────────────────┤    ├─────────────────────────────────────┤                        │
│  │ • ThemeInitialEvent                 │    │ • ThemeInitial                       │                        │
│  │ • ToggleThemeEvent                  │    │ • ThemeLoaded                        │                        │
│  └─────────────────────────────────────┘    └─────────────────────────────────────┘                        │
│                    │                                    ▲                                                    │
│                    ▼                                    │                                                    │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                   Theme BLoC                                                            │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                    │ │
│  │  │ _onThemeInitial │  │ _onToggleTheme  │  │ Theme Service   │  │ App Theme       │                    │ │
│  │  │                 │  │                 │  │                 │  │                 │                    │ │
│  │  │ • Load saved    │  │ • Toggle mode   │  │ • SharedPrefs   │  │ • Light Theme   │                    │ │
│  │  │ • Default theme │  │ • Save state    │  │ • isDarkMode()  │  │ • Dark Theme    │                    │ │
│  │  │ • Emit state    │  │ • Emit new state│  │ • setDarkMode() │  │ • Colors        │                    │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                    │ │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    Repository Pattern                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                        │
│  │  Swap Repository│  │ Message Repository│  │ Profile Repository│  │ Forum Repository│                    │
│  ├─────────────────┤  ├─────────────────┤  ├─────────────────┤  ├─────────────────┤                        │
│  │ • getAllSwaps() │  │ • getUserChats()│  │ • getProfile()  │  │ • getDiscussions│                        │
│  │ • getSwapsBySkill│ │ • getMessages() │  │ • updateProfile()│  │ • createPost()  │                        │
│  │ • createSwap()  │  │ • createChat()  │  │ • uploadAvatar()│  │ • addReply()    │                        │
│  │ • updateSwap()  │  │ • sendMessage() │  │ • addSkill()    │  │ • getReplies()  │                        │
│  │ • deleteSwap()  │  │ • markAsRead()  │  │ • removeSkill() │  │ • updatePost()  │                        │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                        │
│           │                      │                      │                      │                            │
│           ▼                      ▼                      ▼                      ▼                            │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                  Firebase Services                                                     │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                    │ │
│  │  │   Firestore     │  │ Firebase Storage│  │ Firebase Auth   │  │ Real-time DB    │                    │ │
│  │  │                 │  │                 │  │                 │  │                 │                    │ │
│  │  │ • Collections   │  │ • Image Upload  │  │ • User Auth     │  │ • Live Updates  │                    │ │
│  │  │ • Documents     │  │ • File URLs     │  │ • User ID       │  │ • Offline Sync  │                    │ │
│  │  │ • Queries       │  │ • Metadata      │  │ • Permissions   │  │ • Data Sync     │                    │ │
│  │  │ • Transactions  │  │ • Security      │  │ • Token Mgmt    │  │ • Conflict Res  │                    │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘                    │ │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

## 🔄 Data Flow Diagram

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                        Data Flow Architecture                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│    User     │───▶│    UI       │───▶│    BLoC     │───▶│ Repository  │───▶│  Firebase   │
│ Interaction │    │  (Widget)   │    │  (Events)   │    │  (Data)     │    │  Services   │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
       ▲                   ▲                   │                   │                   │
       │                   │                   ▼                   ▼                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   State     │◀───│   BLoC      │◀───│   State     │◀───│  Data       │◀───│  Response   │
│  Changes    │    │  (States)   │    │  Updates    │    │  Models     │    │  (JSON)     │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    Detailed Flow Example                                                   │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ 1. User Login Flow                                                                                          │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐              │
│  │ User taps   │───▶│ LoginPage   │───▶│ AuthBloc    │───▶│ AuthRepo     │───▶│ Firebase    │              │
│  │ Login Button│    │ Widget      │    │ Event       │    │ Login()      │    │ Auth       │              │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘              │
│         │                   │                   │                   │                   │                  │
│         ▼                   ▼                   ▼                   ▼                   ▼                  │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐              │
│  │ UI Updates  │◀───│ AuthState   │◀───│ AuthSuccess │◀───│ User Data   │◀───│ Auth Token  │              │
│  │ (Loading)   │    │ (Success)   │    │ State       │    │ (User Model)│    │ (Firebase)  │              │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘              │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ 2. Theme Toggle Flow                                                                                        │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐              │
│  │ User taps   │───▶│ ThemeSwitch │───▶│ ThemeBloc   │───▶│ ThemeService│───▶│ SharedPrefs │              │
│  │ Theme Toggle│    │ Widget      │    │ ToggleEvent │    │ setDarkMode()│    │ Storage     │              │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘              │
│         │                   │                   │                   │                   │                  │
│         ▼                   ▼                   ▼                   ▼                   ▼                  │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐              │
│  │ UI Updates  │◀───│ ThemeState  │◀───│ ThemeLoaded │◀───│ Theme Data  │◀───│ Saved Theme │              │
│  │ (Dark Mode) │    │ (Dark)      │    │ State       │    │ (bool)       │    │ (Local)     │              │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘              │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ 3. Data Fetching Flow                                                                                       │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐              │
│  │ App Starts  │───▶│ HomePage    │───▶│ SwapRepo    │───▶│ Firestore   │───▶│ Firebase    │              │
│  │ (Init)      │    │ Widget      │    │ getAllSwaps()│   │ Collection  │    │ Database    │              │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘              │
│         │                   │                   │                   │                   │                  │
│         ▼                   ▼                   ▼                   ▼                   ▼                  │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐              │
│  │ UI Updates  │◀───│ Stream      │◀───│ Swap Models │◀───│ JSON Data   │◀───│ Real-time   │              │
│  │ (Swap List) │    │ (Live Data) │    │ (List<Swap>)│    │ (Documents) │    │ Updates     │              │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘              │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

## 🏗️ Architecture Summary

### **Pattern Used:** Clean Architecture with BLoC Pattern

### **Key Architectural Principles:**
1. **Separation of Concerns**: Each layer has a specific responsibility
2. **Dependency Inversion**: High-level modules don't depend on low-level modules
3. **Single Responsibility**: Each class has one reason to change
4. **Testability**: Easy to unit test each component in isolation

### **Layer Responsibilities:**

#### **🎨 Presentation Layer (UI)**
- **Widgets**: Reusable UI components
- **Pages**: Screen-level widgets
- **Navigation**: Route management

#### **🎭 Business Logic Layer (BLoC)**
- **Events**: User actions and system events
- **States**: UI state representation
- **BLoC**: Business logic processing

#### **📊 Data Layer (Repository)**
- **Repository**: Data access abstraction
- **Models**: Data transfer objects
- **Services**: External service integration

#### **🔥 Infrastructure Layer (Firebase)**
- **Firestore**: NoSQL database
- **Firebase Auth**: Authentication service
- **Firebase Storage**: File storage
- **Google Sign-In**: OAuth provider

### **Benefits of This Architecture:**
- ✅ **Scalable**: Easy to add new features
- ✅ **Maintainable**: Clear separation of concerns
- ✅ **Testable**: Each layer can be tested independently
- ✅ **Flexible**: Easy to change implementations
- ✅ **Reusable**: Components can be reused across features

This architecture provides a solid foundation for the SkillSwap application, ensuring code quality, maintainability, and scalability as the app grows. 